<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aegis8 — Test: ¿Cuánto sabes de ciberseguridad?</title>
  <meta name="description" content="Test didáctico de ciberseguridad de Aegis8. Aprende con feedback claro: cuentas, phishing, backups, MFA, contraseñas, dispositivos y hábitos." />
  <meta name="theme-color" content="#0B2A5B" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#F7FBFF;
      --card:#FFFFFF;
      --text:#0B1B34;
      --muted:#4B5E7B;
      --line:#DCEBFF;
      --blue:#0B2A5B;
      --sky:#2FA9FF;
      --sky2:#8FD3FF;
      --shadow:0 18px 45px rgba(11,42,91,.10);
      --radius:18px;
      --radius2:26px;
      --max:1080px;
      --ok:#0B5B3A;
      --bad:#B42828;
      --warn:#8A5A0B;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Plus Jakarta Sans", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 420px at 20% -10%, rgba(47,169,255,.25), transparent 60%),
        radial-gradient(900px 420px at 90% 0%, rgba(143,211,255,.25), transparent 60%),
        linear-gradient(180deg,#FFFFFF 0%, var(--bg) 100%);
      line-height:1.45;
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .wrap{width:min(var(--max), 100% - 40px);margin:0 auto}
    .muted{color:var(--muted)}
    .center{text-align:center}

    /* Top progress */
    .progress{
      position:fixed;top:0;left:0;height:3px;width:0%;
      background:linear-gradient(90deg, rgba(47,169,255,0), rgba(47,169,255,.92), rgba(143,211,255,.95));
      z-index:9999;
      box-shadow:0 8px 20px rgba(47,169,255,.22);
    }

    header{
      position:sticky;top:0;z-index:50;
      background:rgba(255,255,255,.78);
      backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(220,235,255,.85);
    }
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 0;gap:16px;
    }
    .brand{display:flex;align-items:center;gap:12px;min-width:210px}
    .logo{
      width:38px;height:38px;border-radius:12px;
      background:linear-gradient(135deg,var(--blue),#0D3B85);
      position:relative;
      box-shadow:0 14px 30px rgba(11,42,91,.18);
      flex:0 0 auto;
    }
    .logo:before{
      content:"";
      position:absolute;inset:9px 11px 9px 11px;
      border-radius:10px 10px 14px 14px;
      background:linear-gradient(135deg, rgba(143,211,255,.95), rgba(47,169,255,.85));
      clip-path:polygon(50% 0%, 92% 18%, 92% 55%, 50% 100%, 8% 55%, 8% 18%);
      opacity:.95;
    }
    .brand strong{font-size:16px;letter-spacing:.2px}
    .brand span{display:block;margin-top:2px;font-size:12px;color:var(--muted)}

    nav ul{
      list-style:none;padding:0;margin:0;
      display:flex;align-items:center;gap:10px;flex-wrap:wrap;
    }
    nav a{
      font-size:14px;
      color:rgba(11,27,52,.86);
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(220,235,255,.95);
      background:rgba(255,255,255,.78);
      box-shadow:0 10px 24px rgba(11,42,91,.06);
      transition:transform .12s ease, background .12s ease, box-shadow .12s ease, border-color .12s ease;
      white-space:nowrap;
    }
    nav a:hover{
      transform:translateY(-1px);
      background:rgba(220,235,255,.55);
      border-color:rgba(47,169,255,.35);
      box-shadow:0 14px 34px rgba(11,42,91,.10);
      color:var(--blue);
    }
    nav a.active{
      border-color:rgba(47,169,255,.45);
      background:linear-gradient(135deg, rgba(47,169,255,.14), rgba(143,211,255,.22));
      color:var(--blue);
      font-weight:800;
    }

    .menu-btn{
      display:none;width:44px;height:44px;border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.9);
      box-shadow:0 12px 30px rgba(11,42,91,.08);
      cursor:pointer;align-items:center;justify-content:center;
    }
    .menu-lines{width:18px;height:12px;position:relative}
    .menu-lines span{position:absolute;left:0;right:0;height:2px;border-radius:99px;background:rgba(11,42,91,.8)}
    .menu-lines span:nth-child(1){top:0}
    .menu-lines span:nth-child(2){top:5px}
    .menu-lines span:nth-child(3){top:10px}
    .mobile-panel{display:none;padding:0 0 14px 0}
    .mobile-panel a{
      display:block;padding:12px 12px;margin:10px 0;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.85);
      font-weight:700;color:rgba(11,27,52,.9);
    }
    .mobile-panel a:hover{background:rgba(220,235,255,.55);color:var(--blue)}
    .right{display:flex;align-items:center;gap:10px}

    main{padding:30px 0 70px}
    section{padding:54px 0}
    section + section{border-top:1px solid rgba(220,235,255,.75)}

    h1{
      font-size:clamp(32px, 4vw, 48px);
      line-height:1.06;
      margin:14px 0 10px;
      letter-spacing:-.7px;
    }
    .lead{
      font-size:clamp(16px, 1.35vw, 18px);
      color:var(--muted);
      margin:0 auto 18px;
      max-width:82ch;
    }

    .pill{
      display:inline-flex;align-items:center;gap:10px;
      padding:8px 12px;border:1px solid var(--line);
      background:rgba(255,255,255,.82);border-radius:999px;
      box-shadow:0 8px 25px rgba(11,42,91,.06);
      backdrop-filter:blur(8px);
    }
    .dot{width:10px;height:10px;border-radius:999px;background:radial-gradient(circle at 30% 30%, var(--sky2), var(--sky));box-shadow:0 0 0 4px rgba(47,169,255,.12)}
    .k{
      background:linear-gradient(135deg, rgba(47,169,255,.22), rgba(143,211,255,.35));
      border:1px solid rgba(47,169,255,.25);
      padding:0 .45em;border-radius:.65em;
      color:rgba(11,42,91,.92);
      font-weight:800;white-space:nowrap;
    }

    .gradline{
      height:1px;width:min(640px,100%);margin:14px auto 0;border-radius:99px;
      background:linear-gradient(90deg, rgba(47,169,255,0), rgba(47,169,255,.55), rgba(143,211,255,.65), rgba(47,169,255,.55), rgba(47,169,255,0));
      position:relative;overflow:hidden;
    }
    .gradline:after{
      content:"";position:absolute;top:0;bottom:0;width:160px;left:-180px;
      background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.75), rgba(255,255,255,0));
      filter:blur(1px);animation:shine 2.8s ease-in-out infinite;
    }
    @keyframes shine{
      0%{transform:translateX(0);opacity:0}
      15%{opacity:.8}
      50%{opacity:.9}
      85%{opacity:.8}
      100%{transform:translateX(900px);opacity:0}
    }

    .sec-head{display:flex;flex-direction:column;gap:8px;margin-bottom:18px}
    .sec-head h2{margin:0;font-weight:900;font-size:clamp(22px, 2.3vw, 32px);letter-spacing:-.35px}
    .sec-sub{margin:0;max-width:92ch;color:var(--muted);font-size:15.5px}

    .card{
      background:rgba(255,255,255,.92);
      border:1px solid var(--line);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
    }
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}

    /* Quiz UI */
    .quiz{
      padding:18px;
      overflow:hidden;
      position:relative;
    }
    .quiz:before{
      content:"";position:absolute;inset:-2px;
      background:
        radial-gradient(520px 240px at 15% 10%, rgba(47,169,255,.12), transparent 60%),
        radial-gradient(520px 240px at 90% 0%, rgba(143,211,255,.14), transparent 55%);
      opacity:.9;pointer-events:none;
    }
    .quiz>*{position:relative}

    .meter{
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
      margin-bottom:12px;
    }
    .bar{
      height:10px;border-radius:999px;border:1px solid rgba(220,235,255,.95);
      background:rgba(255,255,255,.75);overflow:hidden;
      box-shadow:0 12px 24px rgba(11,42,91,.06);
      flex:1 1 220px;
    }
    .bar > div{
      height:100%;width:0%;
      background:linear-gradient(90deg, rgba(47,169,255,.75), rgba(143,211,255,.85));
      transition:width .35s ease;
    }
    .pill2{
      display:inline-flex;align-items:center;gap:10px;
      padding:8px 12px;border:1px solid rgba(220,235,255,.95);
      background:rgba(255,255,255,.85);border-radius:999px;
      box-shadow:0 10px 24px rgba(11,42,91,.06);
      font-weight:900;color:rgba(11,42,91,.86);
      white-space:nowrap;
    }

    .q{
      padding:14px;
      border:1px solid rgba(220,235,255,.95);
      border-radius:22px;
      background:rgba(255,255,255,.92);
      box-shadow:0 12px 30px rgba(11,42,91,.08);
      margin-top:10px;
    }
    .q h3{margin:0;font-size:16px;letter-spacing:-.12px}
    .q p{margin:6px 0 0;color:var(--muted);font-size:13.5px}
    .answers{display:grid;gap:10px;margin-top:12px}
    .ans{
      display:flex;gap:12px;align-items:flex-start;
      padding:12px;border-radius:18px;
      border:1px solid rgba(220,235,255,.95);
      background:rgba(255,255,255,.88);
      cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
      text-align:left;
    }
    .ans:hover{transform:translateY(-1px);box-shadow:0 18px 40px rgba(11,42,91,.10);border-color:rgba(47,169,255,.35)}
    .radio{
      width:22px;height:22px;border-radius:999px;
      border:1px solid rgba(220,235,255,.95);
      background:rgba(11,42,91,.06);
      display:grid;place-items:center;flex:0 0 auto;margin-top:1px;
    }
    .dot2{width:10px;height:10px;border-radius:999px;background:rgba(47,169,255,.75);opacity:0;transform:scale(.85);transition:.12s ease}
    .ans.selected .dot2{opacity:1;transform:scale(1)}
    .ans.correct{
      border-color:rgba(11,91,58,.25);
      background:rgba(11,91,58,.06);
    }
    .ans.wrong{
      border-color:rgba(180,40,40,.22);
      background:rgba(180,40,40,.05);
    }

    .feedback{
      margin-top:12px;
      padding:12px 12px;border-radius:18px;
      border:1px solid rgba(220,235,255,.95);
      background:rgba(255,255,255,.85);
      color:rgba(11,42,91,.92);
      box-shadow:0 12px 24px rgba(11,42,91,.06);
      display:none;
    }
    .feedback.show{display:block}
    .fb-head{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .tag{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(220,235,255,.95);
      background:rgba(255,255,255,.85);
      font-weight:900;font-size:12px;
      color:rgba(11,42,91,.86);
    }
    .tag.ok{border-color:rgba(11,91,58,.22);background:rgba(11,91,58,.06);color:rgba(11,91,58,.95)}
    .tag.bad{border-color:rgba(180,40,40,.22);background:rgba(180,40,40,.05);color:rgba(180,40,40,.95)}
    .tag.warn{border-color:rgba(138,90,11,.22);background:rgba(138,90,11,.06);color:rgba(138,90,11,.95)}

    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:11px 14px;border-radius:14px;border:1px solid var(--line);
      background:rgba(255,255,255,.92);color:var(--blue);font-weight:800;
      box-shadow:0 12px 30px rgba(11,42,91,.08);
      transition:transform .12s ease, box-shadow .12s ease, background .12s ease;
      cursor:pointer;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 18px 40px rgba(11,42,91,.12)}
    .btn.primary{
      border-color:rgba(47,169,255,.35);
      background:linear-gradient(135deg, rgba(47,169,255,.15), rgba(143,211,255,.25));
      color:var(--blue);
    }
    .btn-row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:14px}

    .mini{font-size:12.5px;color:var(--muted)}
    .callout{
      margin-top:12px;padding:12px 12px;border-radius:var(--radius);
      border:1px solid rgba(47,169,255,.25);
      background:linear-gradient(135deg, rgba(47,169,255,.10), rgba(143,211,255,.18));
      color:rgba(11,42,91,.9);font-weight:900;font-size:13px;
    }

    /* Reveal */
    .reveal{opacity:0;transform:translateY(10px);transition:opacity .55s ease, transform .55s ease}
    .reveal.on{opacity:1;transform:none}

    footer{
      padding:28px 0 40px;
      border-top:1px solid rgba(220,235,255,.9);
      background:rgba(255,255,255,.55);
    }
    .foot{display:flex;align-items:flex-start;justify-content:space-between;gap:18px;flex-wrap:wrap}

    @media (max-width: 980px){
      .grid-2{grid-template-columns:1fr}
      .grid-3{grid-template-columns:1fr}
    }
    @media (max-width: 760px){
      nav ul{display:none}
      .menu-btn{display:inline-flex}
      .wrap{width:min(var(--max), 100% - 28px)}
    }
    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto !important;transition:none !important;animation:none !important}
    }
  </style>
</head>

<body>
  <div class="progress" id="progress" aria-hidden="true"></div>

  <header>
    <div class="wrap">
      <div class="nav">
        <a class="brand" href="index.html" aria-label="Aegis8 Home">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <strong>Aegis8</strong>
            <span>Test didáctico</span>
          </div>
        </a>

        <nav aria-label="Navegación principal">
          <ul>
            <li><a href="como-trabajamos.html">Cómo trabajamos</a></li>
            <li><a href="a-quienes-ayudamos.html">A quiénes ayudamos</a></li>
            <li><a href="quienes-somos.html">Quiénes somos</a></li>
            <li><a href="psocial.html">Proyecto social</a></li>
            <li><a href="contactanos.html">Contáctanos</a></li>
          </ul>
        </nav>

        <div class="right">
          <button class="menu-btn" id="menuBtn" aria-label="Abrir menú" aria-expanded="false" aria-controls="mobilePanel">
            <div class="menu-lines" aria-hidden="true"><span></span><span></span><span></span></div>
          </button>
        </div>
      </div>

      <div class="mobile-panel" id="mobilePanel" aria-label="Menú móvil">
        <a href="como-trabajamos.html">Cómo trabajamos</a>
        <a href="a-quienes-ayudamos.html">A quiénes ayudamos</a>
        <a href="quienes-somos.html">Quiénes somos</a>
        <a href="psocial.html">Proyecto social</a>
        <a href="contactanos.html">Contáctanos</a>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap">
      <section class="hero">
        <div class="center">
          <div class="pill reveal" role="note">
            <span class="dot" aria-hidden="true"></span>
            <span><strong>Test Aegis8</strong> — aprende mientras respondes</span>
          </div>

          <h1 class="reveal">¿Cuánto sabes de ciberseguridad?</h1>

          <p class="lead reveal">
            No es para “pillar” a nadie. Es para darte <span class="k">feedback claro</span> y hábitos útiles:
            phishing, MFA, backups, contraseñas, dispositivos y señales típicas.
          </p>

          <div class="center reveal" style="display:flex; gap:12px; flex-wrap:wrap; justify-content:center;">
            <button class="btn primary" id="startBtn" type="button">Empezar</button>
            <button class="btn" id="randomBtn" type="button" title="Reordenar preguntas">Reordenar</button>
          </div>
        </div>

        <div class="gradline" aria-hidden="true"></div>

        <div class="grid-3" style="margin-top:18px;">
          <div class="card reveal" style="padding:16px;">
            <div style="font-weight:900;color:rgba(11,42,91,.92);">Duración</div>
            <div class="muted" style="margin-top:6px;">~3 minutos (10 preguntas).</div>
          </div>
          <div class="card reveal" style="padding:16px;">
            <div style="font-weight:900;color:rgba(11,42,91,.92);">Nivel</div>
            <div class="muted" style="margin-top:6px;">Personas, startups y pymes.</div>
          </div>
          <div class="card reveal" style="padding:16px;">
            <div style="font-weight:900;color:rgba(11,42,91,.92);">Resultado</div>
            <div class="muted" style="margin-top:6px;">Recomendaciones por tema.</div>
          </div>
        </div>
      </section>

      <section id="quiz">
        <div class="sec-head reveal">
          <h2>Test interactivo</h2>
          <p class="sec-sub">Cada respuesta trae explicación breve (para aprender altiro).</p>
        </div>

        <div class="card quiz reveal">
          <div class="meter">
            <div class="pill2" id="counter">Pregunta 0 / 10</div>
            <div class="bar" aria-label="Progreso"><div id="barFill"></div></div>
            <div class="pill2" id="score">Puntaje: 0</div>
          </div>

          <div id="question" class="q" aria-live="polite"></div>
          <div id="answers" class="answers" aria-label="Alternativas"></div>

          <div id="feedback" class="feedback" aria-live="polite">
            <div class="fb-head">
              <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
                <span class="tag" id="fbTag">—</span>
                <span class="tag warn" id="fbTopic">Tema</span>
              </div>
              <div class="mini" id="fbMini">Tip Aegis8</div>
            </div>
            <div class="muted" style="margin-top:8px;" id="fbText"></div>
            <div class="callout" id="fbDo">Qué hacer hoy: —</div>
          </div>

          <div class="btn-row">
            <button class="btn" id="prevBtn" type="button">Anterior</button>
            <button class="btn primary" id="nextBtn" type="button">Siguiente</button>
            <button class="btn" id="restartBtn" type="button">Reiniciar</button>
          </div>

          <div class="mini" style="margin-top:10px;">
            Consejo: si fallas una, no pasa nada — quédate con el “Qué hacer hoy”.
          </div>
        </div>

        <div class="grid-2" style="margin-top:18px;">
          <div class="card reveal" style="padding:16px;">
            <div style="font-weight:900;color:rgba(11,42,91,.92);">Siguiente paso (ideal)</div>
            <div class="muted" style="margin-top:6px;">
              Con tu resultado, te armamos un plan de “mínimos” para tu caso (persona/startup/pyme).
            </div>
            <div class="btn-row">
              <a class="btn primary" href="contactanos.html">Ir a Contáctanos</a>
              <a class="btn" href="psocial.html">Ver Proyecto social</a>
            </div>
          </div>

          <div class="card reveal" style="padding:16px;">
            <div style="font-weight:900;color:rgba(11,42,91,.92);">Tip Aegis8</div>
            <div class="muted" style="margin-top:6px;">
              El 80% del riesgo baja con: MFA, backups probados, accesos ordenados y hábitos mensuales.
            </div>
            <div class="callout">Si no se puede sostener, se simplifica.</div>
          </div>
        </div>
      </section>

    </div>
  </main>

  <footer>
    <div class="wrap">
      <div class="foot">
        <div class="brand" aria-label="Aegis8">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <strong>Aegis8</strong>
            <span>Claridad • Criterio • Comunidad</span>
          </div>
        </div>

        <div style="max-width: 64ch;">
          <small class="muted">
            © <span id="year"></span> Aegis8. Página estática. El test se ejecuta 100% en tu navegador (sin backend).
          </small>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Mobile menu
    const btn = document.getElementById("menuBtn");
    const panel = document.getElementById("mobilePanel");
    function closeMobileMenu(){ panel.style.display="none"; btn.setAttribute("aria-expanded","false"); }
    function toggleMobileMenu(){
      const isOpen = btn.getAttribute("aria-expanded")==="true";
      if(isOpen) closeMobileMenu();
      else{ panel.style.display="block"; btn.setAttribute("aria-expanded","true"); }
    }
    btn.addEventListener("click", toggleMobileMenu);
    panel.querySelectorAll("a").forEach(a=>a.addEventListener("click", closeMobileMenu));
    window.addEventListener("resize", ()=>{ if(window.innerWidth>760) closeMobileMenu(); });

    // Scroll progress
    const progress = document.getElementById("progress");
    function onScroll(){
      const h = document.documentElement;
      const scrolled = (h.scrollTop) / (h.scrollHeight - h.clientHeight);
      progress.style.width = `${Math.max(0, Math.min(1, scrolled)) * 100}%`;
    }
    window.addEventListener("scroll", onScroll, { passive:true });
    onScroll();

    // Reveal
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add("on");
          io.unobserve(e.target);
        }
      });
    }, { threshold:0.12 });
    document.querySelectorAll(".reveal").forEach(el=>io.observe(el));

    // Quiz data (editable fácil)
    // Tip: puedes cambiar/añadir preguntas acá mes a mes.
    const QUESTIONS_BASE = [
      {
        topic:"Phishing",
        q:"Te llega un correo “Tu cuenta será suspendida hoy. Haz clic y confirma”. ¿Qué haces?",
        sub:"Señales típicas: urgencia, miedo, link raro, petición de credenciales.",
        a:[
          "Hago clic rápido para que no se suspenda.",
          "Respondo el correo preguntando si es real.",
          "No hago clic: reviso el remitente, voy al sitio por mi cuenta y verifico desde ahí.",
          "Reenvío el correo a todos para avisar."
        ],
        correct:2,
        why:"Los ataques de phishing usan urgencia. Lo seguro es NO entrar por el enlace: entra por tu ruta habitual (bookmark/app) y verifica allí.",
        do:"Qué hacer hoy: activa MFA en el correo y usa un gestor de contraseñas."
      },
      {
        topic:"MFA",
        q:"¿Dónde conviene activar MFA (2FA) primero?",
        sub:"Piensa en “llaves maestras”.",
        a:[
          "Solo en redes sociales.",
          "En el correo y en cuentas con acceso a dinero/dominios/repos/cloud.",
          "Solo en el computador del trabajo.",
          "No sirve, igual se puede hackear."
        ],
        correct:1,
        why:"Si alguien toma tu correo, puede resetear contraseñas del resto. Prioriza correo + dominios + repos + cloud + banca.",
        do:"Qué hacer hoy: activa MFA en tu correo y guarda códigos de respaldo."
      },
      {
        topic:"Backups",
        q:"¿Qué significa tener “backups buenos”?",
        sub:"Pista: no basta con “tenerlos”.",
        a:[
          "Tengo un disco con copia de archivos.",
          "Tengo backups y probé restaurar, aunque sea una parte.",
          "Tengo una carpeta “Backup” en el escritorio.",
          "Uso la papelera de reciclaje."
        ],
        correct:1,
        why:"Backup sin prueba es esperanza. Probar restauración evita descubrir tarde que el backup era incompleto o corrupto.",
        do:"Qué hacer hoy: agenda una prueba de restauración corta (10–15 min)."
      },
      {
        topic:"Contraseñas",
        q:"¿Cuál es la mejor práctica para contraseñas?",
        sub:"Evitar reutilización es clave.",
        a:[
          "Una contraseña fuerte para todo.",
          "Contraseñas únicas + gestor + MFA.",
          "Cambiar la contraseña cada 2 días.",
          "Guardar contraseñas en notas del celular."
        ],
        correct:1,
        why:"La reutilización hace que una filtración te derrumbe todo. Un gestor permite únicas y largas sin memorizarlas.",
        do:"Qué hacer hoy: instala un gestor (Bitwarden u otro) y cambia las 3 cuentas más críticas."
      },
      {
        topic:"Actualizaciones",
        q:"¿Por qué actualizar el sistema y apps importa tanto?",
        sub:"Las vulnerabilidades suelen tener parches.",
        a:[
          "Solo por tener funciones nuevas.",
          "Porque los parches corrigen fallas que atacantes explotan.",
          "Porque si no, se vuelve más lento.",
          "No importa si tengo antivirus."
        ],
        correct:1,
        why:"Muchos ataques explotan fallas conocidas. Actualizar reduce superficie de ataque, incluso antes que herramientas extra.",
        do:"Qué hacer hoy: activa actualizaciones automáticas y reinicia cuando te lo pida."
      },
      {
        topic:"Dominios/DNS",
        q:"Si alguien compromete tu cuenta del dominio/DNS, ¿qué puede pasar?",
        sub:"Es más grave de lo que parece.",
        a:[
          "No pasa nada, solo cambia el nombre.",
          "Puede redirigir tu web/correo y robar datos o credenciales.",
          "Solo se cae el sitio un rato.",
          "Solo afecta a Google."
        ],
        correct:1,
        why:"Con DNS pueden redirigir tu tráfico (web/correo), montar páginas falsas y capturar logins.",
        do:"Qué hacer hoy: activa MFA en tu registrador de dominio y revisa accesos."
      },
      {
        topic:"Wi‑Fi",
        q:"Ves una Wi‑Fi pública llamada “FreeAirportWiFi”. ¿Qué es lo más seguro?",
        sub:"Evitar exponer sesiones/credenciales.",
        a:[
          "Conectarme y usar banca en línea.",
          "Conectarme, pero solo para redes sociales.",
          "Evitar acciones sensibles, usar VPN si tienes, o usar datos móviles.",
          "Desactivar el firewall para que ande mejor."
        ],
        correct:2,
        why:"Redes públicas pueden ser monitoreadas o falsas (evil twin). Evita banca/credenciales; VPN ayuda pero no es magia.",
        do:"Qué hacer hoy: desactiva auto‑conexión a Wi‑Fi y usa hotspot en urgencias."
      },
      {
        topic:"Permisos",
        q:"En una startup/pyme, ¿qué principio ayuda más a reducir daño si una cuenta cae?",
        sub:"Menos permisos, menos desastre.",
        a:[
          "Dar admin a todos para avanzar rápido.",
          "Mínimo privilegio: cada uno con lo necesario y nada más.",
          "Compartir una sola cuenta entre todos.",
          "No usar permisos para que no moleste."
        ],
        correct:1,
        why:"El mínimo privilegio limita el “blast radius”. Si una cuenta cae, el atacante no se lleva todo.",
        do:"Qué hacer hoy: revisa quién tiene admin y reduce permisos."
      },
      {
        topic:"Incidentes",
        q:"Sospechas que tu cuenta fue comprometida. ¿Primer paso?",
        sub:"Actuar rápido, pero ordenado.",
        a:[
          "Publicar en redes que me hackearon.",
          "Cambiar contraseña desde el mismo link sospechoso.",
          "Cambiar contraseña desde la vía oficial + cerrar sesiones + revisar MFA/recuperación.",
          "Formatear el computador inmediatamente."
        ],
        correct:2,
        why:"Cambia credenciales desde tu ruta habitual, cierra sesiones en dispositivos y revisa métodos de recuperación (correo/teléfono/MFA).",
        do:"Qué hacer hoy: revisa ‘sesiones activas’ y métodos de recuperación en tu correo."
      }
    ];

    // Elements
    const counter = document.getElementById("counter");
    const scoreEl = document.getElementById("score");
    const barFill = document.getElementById("barFill");
    const qEl = document.getElementById("question");
    const answersEl = document.getElementById("answers");
    const fb = document.getElementById("feedback");
    const fbTag = document.getElementById("fbTag");
    const fbTopic = document.getElementById("fbTopic");
    const fbText = document.getElementById("fbText");
    const fbDo = document.getElementById("fbDo");
    const fbMini = document.getElementById("fbMini");

    const startBtn = document.getElementById("startBtn");
    const randomBtn = document.getElementById("randomBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const restartBtn = document.getElementById("restartBtn");

    let QUESTIONS = [];
    let idx = 0;
    let score = 0;
    let answered = {}; // idx -> selected
    let locked = {};   // idx -> true (show correct/wrong state)

    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function init(randomize=false){
      QUESTIONS = randomize ? shuffle(QUESTIONS_BASE) : QUESTIONS_BASE.slice();
      idx = 0;
      score = 0;
      answered = {};
      locked = {};
      render();
      document.getElementById("quiz").scrollIntoView({ behavior:"smooth", block:"start" });
    }

    function setProgress(){
      const total = QUESTIONS.length || QUESTIONS_BASE.length;
      counter.textContent = `Pregunta ${Math.min(idx+1,total)} / ${total}`;
      scoreEl.textContent = `Puntaje: ${score}`;
      const p = total ? (Object.keys(locked).length/total)*100 : 0;
      barFill.style.width = `${Math.max(0, Math.min(100, p))}%`;
    }

    function render(){
      const total = QUESTIONS.length || QUESTIONS_BASE.length;
      const q = (QUESTIONS.length ? QUESTIONS[idx] : QUESTIONS_BASE[idx]);

      setProgress();

      qEl.innerHTML = `
        <h3>${q.q}</h3>
        <p>${q.sub || ""}</p>
      `;

      answersEl.innerHTML = "";
      fb.classList.remove("show");

      const selected = answered[idx];
      const isLocked = !!locked[idx];

      q.a.forEach((txt, i)=>{
        const div = document.createElement("button");
        div.type = "button";
        div.className = "ans";
        div.setAttribute("aria-label", `Respuesta ${i+1}`);
        div.innerHTML = `
          <span class="radio" aria-hidden="true"><span class="dot2"></span></span>
          <span style="font-weight:800;color:rgba(11,42,91,.92);">${txt}</span>
        `;

        if(selected===i) div.classList.add("selected");

        if(isLocked){
          if(i===q.correct) div.classList.add("correct");
          if(selected===i && selected!==q.correct) div.classList.add("wrong");
          div.disabled = true;
          div.style.cursor = "default";
        } else {
          div.addEventListener("click", ()=>choose(i));
        }

        answersEl.appendChild(div);
      });

      prevBtn.disabled = idx===0;
      nextBtn.textContent = idx===total-1 ? "Ver resultado" : "Siguiente";
    }

    function showFeedback(ok, q){
      fb.classList.add("show");
      fbTopic.textContent = q.topic || "Tema";
      if(ok){
        fbTag.textContent = "Correcto";
        fbTag.className = "tag ok";
        fbMini.textContent = "Buen hábito: repite esto siempre.";
      } else {
        fbTag.textContent = "A mejorar";
        fbTag.className = "tag bad";
        fbMini.textContent = "No pasa nada: esto le pasa a todos.";
      }
      fbText.textContent = q.why || "";
      fbDo.textContent = q.do ? `Qué hacer hoy: ${q.do.replace(/^Qué hacer hoy:\s*/i,"")}` : "Qué hacer hoy: aplica un mínimo (MFA + backups + accesos).";
    }

    function choose(i){
      const q = (QUESTIONS.length ? QUESTIONS[idx] : QUESTIONS_BASE[idx]);
      answered[idx] = i;

      const ok = (i===q.correct);
      if(!locked[idx]){
        if(ok) score += 1;
        locked[idx] = true;
      }

      // Rerender to show correct/wrong states
      render();
      showFeedback(ok, q);
    }

    function resultLevel(s, total){
      const pct = (s/total)*100;
      if(pct >= 85) return {label:"Muy sólido", tag:"ok", tip:"Sigue así: ahora construye ritual mensual + permisos mínimos."};
      if(pct >= 65) return {label:"Buen nivel", tag:"warn", tip:"Refuerza 2 cosas: backups probados y accesos/roles."};
      if(pct >= 45) return {label:"Base en construcción", tag:"warn", tip:"Empieza por MFA + gestor de contraseñas + backups probados."};
      return {label:"Partimos desde cero (bien)", tag:"bad", tip:"Perfecto: con 4 mínimos puedes mejorar muchísimo en 1 semana."};
    }

    function showFinal(){
      const total = QUESTIONS.length || QUESTIONS_BASE.length;
      const lvl = resultLevel(score, total);

      const tagCls = lvl.tag==="ok" ? "tag ok" : (lvl.tag==="bad" ? "tag bad" : "tag warn");

      qEl.innerHTML = `
        <h3>Resultado final</h3>
        <p class="muted">Puntaje: <strong>${score} / ${total}</strong> • Nivel: <span class="${tagCls}">${lvl.label}</span></p>
        <div class="callout">${lvl.tip}</div>
        <p class="muted" style="margin-top:10px;">
          Si quieres, te armamos un plan de “mínimos” para tu caso (persona/startup/pyme) en 1 página.
        </p>
      `;
      answersEl.innerHTML = `
        <a class="btn primary" href="contactanos.html">Ir a Contáctanos</a>
        <a class="btn" href="psocial.html">Ver Proyecto social</a>
        <button class="btn" type="button" id="reviewBtn">Revisar preguntas</button>
      `;
      fb.classList.remove("show");

      document.getElementById("reviewBtn").addEventListener("click", ()=>{
        idx = 0;
        render();
        document.getElementById("quiz").scrollIntoView({ behavior:"smooth", block:"start" });
      });

      // fill progress
      barFill.style.width = "100%";
      counter.textContent = `Completado • ${total} preguntas`;
      scoreEl.textContent = `Puntaje: ${score}`;
    }

    // Nav buttons
    prevBtn.addEventListener("click", ()=>{ if(idx>0){ idx--; render(); } });
    nextBtn.addEventListener("click", ()=>{
      const total = QUESTIONS.length || QUESTIONS_BASE.length;
      if(idx === total-1){
        showFinal();
        return;
      }
      idx++;
      render();
    });
    restartBtn.addEventListener("click", ()=>init(false));

    // Start + random
    startBtn.addEventListener("click", ()=>init(false));
    randomBtn.addEventListener("click", ()=>init(true));

    // Initial render (not started yet uses base)
    QUESTIONS = QUESTIONS_BASE.slice();
    render();
  </script>
</body>
</html>
